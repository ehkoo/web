---
import './Post.css'

import DateTime from './DateTime.astro'
import TagLinks from './TagLinks.astro'
import ToC from './ToC.astro'
import IconExternalLink from './IconExternalLink.astro'

const {
  headers,
  post: { readingTime, title, author, date, tags, isPage },
} = Astro.props
---

<article id="post" class="post">
  <h1 class="post-title mb-4 mt-4">{title}</h1>

  <div class="post-wrapper">
    <div>
      <div class="post-content">
        <slot />
      </div>

      {
        !isPage && (
          <>
            <div class="flex gap-2 text-gray-6 text-sm">
              Tags:
              <TagLinks tags={tags} />
            </div>
            <div>
              <script
                src="https://utteranc.es/client.js"
                repo="ehkoo/web"
                issue-term="pathname"
                label="web-comments"
                theme="github-light"
                crossorigin="anonymous"
                async
              />
            </div>
          </>
        )
      }
    </div>

    {
      !isPage && (
        <nav class="post-nav">
          <div class="post-meta text-sm mb-2">
            <p class="mb-2">
              Viết bởi{' '}
              <a
                class="inline-flex align-center gap-1"
                href={`https://github.com/${author}`}
                target="_blank"
                rel="noreferrer nofollow">
                <strong>@{author}</strong> <IconExternalLink />
              </a>
            </p>
            <p>
              • Đăng ngày
              <DateTime show="date" date={date} />
            </p>
            <p>
              • Dài <strong>{readingTime.words}</strong> từ
            </p>
            <p>
              • Đọc trong <strong>{Math.ceil(readingTime.minutes)}</strong> phút
            </p>
          </div>

          <ToC headers={headers} />
        </nav>
      )
    }
  </div>
</article>
