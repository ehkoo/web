---
layout: ../../layouts/Post.astro
title: 'CÃ³ gÃ¬ hot? Tuáº§n 16 - 2023'
date: 2023-04-22
cover: https://res.cloudinary.com/duqeezi8j/image/upload/f_auto/v1679593392/ehkoo/newsletters/w16-2023.png
tags: Newsletter
excerpt: 'Nhá»¯ng tÃ­nh nÄƒng má»›i trong ES2023'
author: kcjpop
---

!["Báº£n tin Ehkoo tuáº§n 16 nÄƒm 2023"](https://res.cloudinary.com/duqeezi8j/image/upload/f_auto/v1679593392/ehkoo/newsletters/w16-2023.png)

## CÃ³ gÃ¬ má»›i trong ECMAScript 2023?

Há»™i Ä‘á»“ng TC39 vá»«a [chá»‘t Ä‘Æ¡n](https://github.com/tc39/proposals/blob/main/finished-proposals.md) nhá»¯ng tÃ­nh nÄƒng cá»§a phiÃªn báº£n ES2023. CÃ¹ng xem qua nhÃ©.

### TÃ¬m má»™t pháº§n tá»­ tá»« cuá»‘i máº£ng

Äá»ƒ tÃ¬m kiáº¿m má»™t pháº§n tá»­ trong máº£ng, chÃºng ta cÃ³ thá»ƒ dÃ¹ng `Array#find(fn)` vÃ  `Array#findIndex(fn)`. Hai phÆ°Æ¡ng thá»©c nÃ y tráº£ vá» pháº§n tá»­ hoáº·c vá»‹ trÃ­ cá»§a pháº§n tá»­ Ä‘áº§u tiÃªn thá»a mÃ£n Ä‘iá»u kiá»‡n cá»§a hÃ m `fn`, **tÃ­nh tá»« Ä‘áº§u máº£ng**. VÃ­ dá»¥:

```js
const arr = [0, 7, 12, 9, 21, 8]

// TÃ¬m sá»‘ láº» Ä‘áº§u tiÃªn trong máº£ng
arr.find((x) => x % 2 === 1) // 7
arr.findIndex((x) => x % 2 === 1) // 1
```

ES2023 bá»• sung hai phÆ°Æ¡ng thá»©c má»›i: `Array#findLast(fn)` vÃ  `Array#findLastIndex(fn)`. NhÆ° tÃªn gá»i, hai phÆ°Æ¡ng thá»©c nÃ y sáº½ tráº£ vá» pháº§n tá»­/ vá»‹ trÃ­ cá»§a pháº§n tá»­ Ä‘áº§u tiÃªn thá»a mÃ£n hÃ m `fn`, nhÆ°ng **tÃ­nh tá»« cuá»‘i máº£ng**.

```js
const arr = [0, 7, 12, 9, 21, 8]

arr.findLast((x) => x % 2 === 1) // 21
arr.findLastIndex((x) => x % 2 === 1) // 4
```

Hiá»‡n táº¡i báº¡n cÃ³ thá»ƒ sá»­ dá»¥ng `findLast()` vÃ  `findLastIndex()` trÃªn táº¥t cáº£ cÃ¡c trÃ¬nh duyá»‡t.

### CÃ¡c phÆ°Æ¡ng thá»©c má»›i cho máº£ng: `toReversed()`, `toSorted()`, `toSpliced()`, vÃ  `with()`

CÃ¡c phÆ°Æ¡ng thá»©c `Array#reverse()`, `Array#sort()`, vÃ  `Array#splice()` thay Ä‘á»•i (mutate) máº£ng khi Ä‘Æ°á»£c gá»i. Äiá»u nÃ y khÃ´ng Ä‘áº£m báº£o tÃ­nh báº¥t biáº¿n (immutability). Do Ä‘Ã³ ES2023 bá»• sung cÃ¡c phÆ°Æ¡ng thá»©c sau vÃ o `Array.prototype`:

- `toReversed()`: Äáº£o ngÆ°á»£c vá»‹ trÃ­ cÃ¡c pháº§n tá»­ cá»§a máº£ng tá»« dÆ°á»›i lÃªn
- `toSorted()`: Sáº¯p xáº¿p máº£ng
- `toSpliced()`: XÃ³a má»™t/nhiá»u pháº§n tá»­ trong máº£ng, hoáº·c thay tháº¿ pháº§n tá»­ á»Ÿ nhá»¯ng vá»‹ trÃ­ nháº¥t Ä‘á»‹nh

```js
const a = [0, 7, 12, 9, 21, 8]

// Äáº£o ngÆ°á»£c máº£ng
const reversed = a.toReversed() // [ 8, 21, 9, 12, 7, 0 ]

// Sáº¯p xáº¿p máº£ng
const sorted = a.toSorted((x, y) => x - y) // [ 0, 7, 8, 9, 12, 21 ]

// XÃ³a pháº§n tá»­ á»Ÿ chá»‰ má»¥c 1
const removed = a.toSpliced(1, 1) // [ 0, 12, 9, 21, 8 ]

a === reversed // false
a === sorted // false
a === removed // false
```

BÃªn cáº¡nh Ä‘Ã³, chÃºng ta cÅ©ng cÃ³ phÆ°Æ¡ng thá»©c má»›i `Array#with(index, value)`. PhÆ°Æ¡ng thá»©c nÃ y dÃ¹ng Ä‘á»ƒ thay tháº¿ giÃ¡ trá»‹ cá»§a má»™t pháº§n tá»­ táº¡i vá»‹ trÃ­ nháº¥t Ä‘á»‹nh. Cháº³ng háº¡n nhÆ°:

```js
const a = [0, 7, 12, 9, 21, 8]

const b = a.with(1, 3) // [0, 3, 12, 9, 21, 8]
a === b // false
```

Trá»« Firefox ra, cÃ¡c trÃ¬nh duyá»‡t khÃ¡c Ä‘á»u Ä‘Ã£ há»— trá»£ phÆ°Æ¡ng thá»©c nÃ y.

### Chuáº©n hÃ³a cÃº phÃ¡p hashbang

Khi viáº¿t script Ä‘á»ƒ cháº¡y trong CLI báº±ng Node.js, cÃ³ thá»ƒ báº¡n sáº½ dÃ¹ng hashbang (hay cÃ²n gá»i lÃ  _shebang_).

```js
// Giáº£ sá»­ chÃºng ta cÃ³ táº­p tin cli.js
#!/usr/bin/env node
console.log('Hello')
```

VÃ  sá»­ dá»¥ng nhÆ° váº§y:

```bash
$ chmod +x cli.js
$ ./cli.js # KhÃ´ng cáº§n pháº£i `node cli.js` ná»¯a
Hello
```

Váº¥n Ä‘á» lÃ  `#!` khÃ´ng pháº£i lÃ  cÃº phÃ¡p há»£p lá»‡ trong ECMAScript, vÃ  thÆ°á»ng thÃ¬ dÃ²ng hashbang sáº½ Ä‘Æ°á»£c mÃ´i trÆ°á»ng chá»§ bá» Ä‘i trÆ°á»›c khi chuyá»ƒn qua cho Node.js thá»±c thi. ES2023 Ä‘á» xuáº¥t chuáº©n hÃ³a cÃº phÃ¡p cá»§a hashbang, vÃ  chá»‰ cho phÃ©p Ä‘áº·t hashbang á»Ÿ Ä‘áº§u táº­p tin.

### Sá»­ dá»¥ng Symbols lÃ m khÃ³a cho WeakMap

Hiá»‡n táº¡i thÃ¬ báº¡n chá»‰ cÃ³ thá»ƒ dÃ¹ng object lÃ m khÃ³a cho WeakMap. ES2023 má»Ÿ rá»™ng ra, cho phÃ©p báº¡n dÃ¹ng Symbol Ä‘á»ƒ lÃ m khÃ³a luÃ´n.

```js
const weak = new WeakMap()
const key = Symbol('ref')
weak.set(key, 'ECMAScript 2023')

console.log(weak.get(key))
```

TÃ­nh nÄƒng nÃ y Ä‘Ã£ Ä‘Æ°á»£c háº§u háº¿t cÃ¡c trÃ¬nh duyá»‡t há»— trá»£ (trá»« Firefox).

Náº¿u chÆ°a biáº¿t vá» WeakMap vÃ  WeakSet thÃ¬ Ä‘á»«ng bá» qua bÃ i viáº¿t [**TÃ¬m hiá»ƒu Map vÃ  Set trong JavaScript**](https://ehkoo.com/bai-viet/map-set-javascript-es6-es2015#weakmap-v%C3%A0-weakset) nha.

## Tin váº¯n

- **Node.js** [phÃ¡t hÃ nh](https://nodejs.org/en/blog/release/v20.0.0) phiÃªn báº£n v20.0.0, thá»­ nghiá»‡m tÃ­nh nÄƒng Permission Model cho phÃ©p láº­p trÃ¬nh viÃªn giá»›i háº¡n quyá»n truy cáº­p tÃ i nguyÃªn cá»§a á»©ng dá»¥ng, cháº³ng háº¡n nhÆ° khÃ´ng cho phÃ©p sá»­ dá»¥ng há»‡ thá»‘ng táº­p tin, táº¡o process con hay thread má»›i. Nghe giá»‘ng Deno ha. PhiÃªn báº£n nÃ y cÅ©ng nÃ¢ng cáº¥p lÃªn V8 11.3.

- **TypeScript** vá»«a [merge](https://github.com/microsoft/TypeScript/pull/51328) tÃ­nh nÄƒng má»›i, cho phÃ©p tráº£ vá» báº¥t cá»© dá»¯ liá»‡u nÃ o cÃ³ thá»ƒ render Ä‘Æ°á»£c nhÆ° string, number, promisesâ€¦ trong React component, thay vÃ¬ chá»‰ `null | JSX.Element`.

- **LightningCSS**, chÆ°Æ¡ng trÃ¬nh xá»­ lÃ½ CSS viáº¿t báº±ng Rust siÃªu nhanh cá»§a Parcel, vá»«a [phÃ¡t hÃ nh](https://github.com/parcel-bundler/lightningcss/releases/tag/v1.20.0) phiÃªn báº£n 1.20.0, mang Ä‘áº¿n nhá»¯ng cáº£i thiá»‡n khi viáº¿t media vÃ  container queries, há»— trá»£ cÃº phÃ¡p `of S` khi dÃ¹ng `:nth-child()`, cáº­p nháº­t dá»¯ liá»‡u vá» tÃ­nh tÆ°Æ¡ng thÃ­ch cá»§a cÃ¡c trÃ¬nh duyá»‡tâ€¦

- **Mozilla** [má»Ÿ rá»™ng tÃ­nh nÄƒng](https://blog.mozilla.org/en/mozilla/firefox-rolls-out-total-cookie-protection-by-default-to-all-users-worldwide/) Total Cookie Protection cho ngÆ°á»i dÃ¹ng trÃªn toÃ n tháº¿ giá»›i. TÃ­nh nÄƒng nÃ y táº¡o riÃªng má»™t "há»™p bÃ¡nh" cho má»—i website, vÃ  chá»‰ website Ä‘Ã³ má»›i cÃ³ thá»ƒ Ä‘á»c dá»¯ liá»‡u cookie cá»§a nÃ³, giÃºp háº¡n cháº¿ ngÆ°á»i dÃ¹ng bá»‹ theo dÃµi khi truy cáº­p nhiá»u website khÃ¡c nhau.

- **Chrome** [thá»­ nghiá»‡m](https://developer.chrome.com/en/blog/richer-install-ui-desktop/) má»™t giao diá»‡n má»›i vá»›i nhiá»u thÃ´ng tin hÆ¡n khi cÃ i Ä‘áº·t web app trÃªn desktop vÃ  mobile. Láº­p trÃ¬nh viÃªn cÃ³ thá»ƒ thÃªm vÃ o nhiá»u screenshots giÃºp ngÆ°á»i dÃ¹ng dá»… hÃ¬nh dung hÆ¡n vá» á»©ng dá»¥ng Ä‘Æ°á»£c cÃ i Ä‘áº·t.

## Má»›i tháº¥y trÃªn quáº§y

_Má»™t vÃ i thÆ° viá»‡n/ cÃ´ng cá»¥ há»¯u Ã­ch mÃ  bá»n mÃ¬nh má»›i phÃ¡t hiá»‡n_ ğŸ˜›

- [**yoavbls/pretty-ts-errors**](https://github.com/yoavbls/pretty-ts-errors): Extension cho VSCode giÃºp thÃ´ng bÃ¡o lá»—i cá»§a TypeScript trá»Ÿ nÃªn dá»… Ä‘á»c (hiá»ƒu) hÆ¡n.

- [**gradient.style**](https://gradient.style): CÃ´ng cá»¥ táº¡o gradient siÃªu xá»‹n cá»§a Adam Argyle, máº·c Ä‘á»‹nh sá»­ dá»¥ng mÃ u oklch nÃªn báº¡n nÃªn xem báº±ng Safari 16.4 nhe.

- [**azurystudio/cheetah**](https://github.com/azurystudio/cheetah): web framwork má»›i cho Deno, tá»± quáº£ng cÃ¡o lÃ  _nhanh nhÆ° bÃ¡o_.

- [**Rich-Harris/headless-qr**](https://github.com/Rich-Harris/headless-qr): ThÆ° viá»‡n táº¡o mÃ£ QR gá»n nháº¹ cá»§a Rich Harris, tÃ¡c giáº£ Svelte.

- [**microsoft/griffel**](https://github.com/microsoft/griffel): ThÆ° viá»‡n CSS-in-JS cá»§a Microsoft,

## Äá»c/ xem gÃ¬ cuá»‘i tuáº§n

- [**Optimize Interaction to Next Paint**](https://web.dev/optimize-inp/): HÆ°á»›ng dáº«n Ä‘áº§y Ä‘á»§ chi tiáº¿t Ä‘á»ƒ phÃ¢n tÃ­ch vÃ  giáº£i quyáº¿t khi á»©ng dá»¥ng cÃ³ sá»‘ Ä‘o INP cao.

- [**Container Query Units and Fluid Typography**](https://moderncss.dev/container-query-units-and-fluid-typography/): BÃ i viáº¿t cá»§a Stephanie Eckles giá»›i thiá»‡u vá» cÃ¡ch xáº¿p chá»¯ co giÃ£n (_fluid typography_) sá»­ dá»¥ng cÃ¡c tÃ­nh nÄƒng má»›i cá»§a CSS nhÆ° container queries, hÃ m `max()`, `min()`, `calc()`, vÃ  `clamp()`â€¦

- [**Offline Is Just Online With Extreme Latency**](https://blog.jim-nielsen.com/2023/offline-is-online-with-extreme-latency/): Jim Nielsen chia sáº» nhá»¯ng suy nghÄ© sau khi xem video [**â€œLocal-first Softwareâ€**](https://www.youtube.com/watch?v=KrPsyr8Ig6M) cá»§a Peter Van Hardenberg. Khi xem offline lÃ  tráº¡ng thÃ¡i online vá»›i Ä‘á»™ trá»… siÃªu lá»›n cÃ³ thá»ƒ thay Ä‘á»•i cÃ¡ch báº¡n xÃ¢y dá»±ng á»©ng dá»¥ng chÄƒng?

- [**It's time to learn oklch color**](https://keithjgrant.com/posts/2023/04/its-time-to-learn-oklch-color/): MÃ¬nh chÆ°a ká»‹p xem ká»¹ vá» HSL thÃ¬ bÃ¢y giá» Ä‘Ã£ cÃ³ thÃªm OKLCH rá»“i ğŸ¥²

- [**Becoming Rustacean: Rust Learning Path from Novice to Mastery**](https://nativebyx.dev/rust/becoming-rustacean/rust-learning-path-from-novice-to-mastery.html): Giá» nhÃ  nhÃ  há»c Rust ngÆ°á»i ngÆ°á»i há»c Rust, báº¡n cÃ³ muá»‘n bá»‹ bá» láº¡i phÃ­a sau hem?

## Káº¿t

Háº¹n gáº·p láº¡i cÃ¡c báº¡n trong tuáº§n tiáº¿p theo ğŸ‘‹
