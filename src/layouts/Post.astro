---
import { Markdown } from '@astropub/md'
import Base from '@/layouts/Base.astro'
import { formatDate } from '@/lib'

const { post } = Astro.props

const title = post.title
const header = post.header ?? title
---

<style>
  .article {
    max-width: 70ch;
  }

  .header {
    line-height: 1.2;
  }
  .header :global(code) {
    --code-background: var(--stone-2);
    --code-color: var(--stone-9);
    --code-font-size: 0.85em;

    font-size: var(--code-font-size);
    padding: 2px 4px;
    border-radius: var(--radius-1);
    color: var(--code-color);
    background-color: var(--code-background);
    font-variant-ligatures: none;
    white-space: nowrap;
  }

  .meta {
    display: flex;
    align-items: center;
    justify-content: space-between;
  }

  .author {
    font-style: normal;
  }
</style>

<Base title={title}>
  <article class="article flow">
    <header class="flow">
      <h1 class="header"><Markdown.Inline of={header} /></h1>

      <div class="meta">
        <address class="author">
          Tác giả: @{post.author}
        </address>

        <span>
          Đăng ngày: <time datetime={post.date} class="published_at">
            {formatDate(post.date)}
          </time>
        </span>
      </div>
    </header>

    <div class="global:content">
      <slot />
    </div>
  </article>
</Base>
