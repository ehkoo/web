---
layout: series.njk
title: Component Và props
date: 2018-05-04
slug: react-component-va-props
series: react-tu-a-den-y
author: kcjpop
---

### React Component Là Gì?

Khi ứng dụng của bạn ngày càng mở rộng, rõ ràng việc đặt tất cả mã nguồn vào một class `App` là không ổn. Bằng cách chia ứng dụng thành từng component nhỏ, có giao diện và hành vi độc lập, việc phát triển trở nên dễ dàng hơn, đồng thời nâng cao khả năng tái sử dụng code.

React hỗ trợ bạn tạo component bằng cách khai báo một lớp ES6 được kế thừa từ `React.Component`, và có chứa phương thức `render()`.

```jsx
class App extends React.Component {
  constructor(props) {
    // Đây là cách bạn khai báo hàm dựng trong component
    super(props)
  }

  render() {
    return <h1>Hello World</h1>
  }
}
```

Bạn có thể hiển thị component trong cây DOM bằng cách gọi đến `React.render(component, domElement)`.

```jsx
ReactDOM.render(<App />, document.getElementById('root'))
```

Bạn có thể đưa dữ liệu bất kỳ từ bên ngoài vào component bằng cách khai báo thuộc tính cho chúng, nghĩa là:

```jsx
ReactDOM.render(<App className="bold" name="John" />, document.getElementById('root'))
```

Bên trong component, bạn có thể truy xuất đến các dữ liệu được truyền vào thông qua `this.props`.

```jsx
class App extends React.Component {
  render() {
    return <h1 className={this.props.className}>Hello {this.props.name}</h1>
  }
}

// Kết quả
// <h1 class="bold">Hello John</h1>
```

Cần lưu ý, các giá trị của `this.props` mang tính chất **CHỈ ĐỌC** (read-only), nghĩa là bạn không thể thay đổi giá trị của chúng từ bên trong component.

Cũng như JSX, chúng ta có thể lồng các component vào với nhau. Giả sử bạn có một component `Avatar`, bạn có thể dùng nó như một tag JSX bình thường.

```jsx
class App extends React.Component {
  render() {
    return (
      <div>
        <h1 className={this.props.className}>Hello {this.props.name}</h1>
        <Avatar url={this.props.avatar} />
      </div>
    )
  }
}
```

### Functional Components

Thay vì sử dụng ES6 class, bạn cũng có thể tạo component bằng cách khai báo một hàm JavaScript bình thường.

```jsx
function App(props) {
  return <h1 className={props.className}>Hello {props.name}</h1>
}
```

Hàm này chỉ có một tham số duy nhất, `props`, và bạn cũng có thể dùng nó như `this.props`. Cách viết này được gọi là "functional component", so với cách viết ở trên là "class component". Điểm khác biệt lớn nhất giữa functional và class components là functional components không hỗ trợ state và life-cycle hooks. Chúng ta sẽ đi sâu vào hai khái niệm này ở những phần sau.

> **LƯU Ý: React có phân biệt chữ hoa/thường trong tên của component**
>
> Đối với React, một component phải được đặt tên theo kiểu PascalCase, với chữ cái bắt đầu của mỗi từ phải được viết hoa (không giống với camelCase đâu nhé). Do đó, `HelloWorld` sẽ được React nhận là một component, trong khi `helloWorld` hay `helloworld` thì không.

### Viết Demo Nào

Đến lúc này bạn đã có đủ kiến thức để "vọc" React rồi. Hãy bắt tay vào viết component đầu tiên: hiển thị một danh sách sản phẩm. Để cho thêm phần "màu mè" hấp dẫn, chúng ta sẽ cài đặt [Semantic UI](https://semantic-ui.com/) vào tập tin `public/index.html`.

```html
<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/semantic-ui/2.2.13/semantic.min.css">
```

Sau đó bạn tạo tập tin `src/List.jsx`:

```jsx
import React from 'react'

const products = [
  { id: 1, name: 'Anak Meat', price: 80 },
  { id: 2, name: 'Birdbeast Egg', price: 20 },
  { id: 3, name: 'Bulette Shank', price: 220 },
  { id: 4, name: 'Daggerquill Breast', price: 60 },
  { id: 5, name: 'Dualhorn Steak', price: 160 },
  { id: 6, name: 'Garula Sirloin', price: 120 },
  { id: 7, name: 'Gighee Ham', price: 30 },
  { id: 8, name: 'Lucian Tomato', price: 200 },
  { id: 9, name: 'Luncheon Meat', price: 100 },
  { id: 10, name: 'Sheep Milk', price: 10 },
]

class List extends React.Component {
  render() {
    return (
      <table className="ui celled table">
        <thead>
          <tr>
            <th>ID</th>
            <th>Name</th>
            <th>Price</th>
          </tr>
        </thead>
        <tbody>
          {products.map(product => (
            <tr>
              <td>{product.id}</td>
              <td>{product.name}</td>
              <td>{product.price} gil</td>
            </tr>
          ))}
        </tbody>
      </table>
    )
  }
}

export default List
```

> ** Tại sao không dùng vòng lặp `for` mà lại là `.map()`?**

> **`.js` hay `.jsx`?**
> Trang chủ của React không có bắt buộc bạn nên dùng phần mở rộng nào, nên việc này tùy thuộc vào sở thích cá nhân và quy ước trong team. Theo kinh nghiệm thì dùng `.jsx` ngoài việc giúp phân biệt JSX và tập tin JS thường còn giúp bạn có thể nhảy nhanh đến tập tin cần tìm (bằng phím tắt Ctrl + P trong Sublime Text/Atom). Do đó chúng ta sẽ đổi tên `src/App.js` thành `src/App.jsx` luôn.

Sau đó bạn cần cập nhật lại `App.jsx`.

```jsx
import React from 'react'
import List from './List'

class App extends React.Component {
  render() {
    return (
      <div className="ui container">
        <List />
      </div>
    )
  }
}

export default App
```

Nếu không có vấn đề gì, trình duyệt của bạn sẽ hiển thị giống như thế này:

<iframe src="https://codesandbox.io/embed/7j12n5rp4j?view=preview" style="width:100%; height:500px; border:0; border-radius: 4px; overflow:hidden;" sandbox="allow-modals allow-forms allow-popups allow-scripts allow-same-origin"></iframe>

Mở Developer Tool lên (nhấn F12), tab Console và bạn sẽ thấy React la làng vì chúng ta không khai báo `key` cho phần tử của mảng.

> Warning: Each child in an array or iterator should have a unique "key" prop.

`key` là một `props` đặt biệt bắt buộc phải có trong mỗi phần tử của mảng. `key` giúp React phân biệt được phần tử nào được thêm mới, cập nhật hay xóa khỏi mảng. `key` đặc biệt hữu ích trong các trường hợp như kéo thả và sắp xếp phần tử. Thông thường bạn có thể dùng ID từ dữ liệu làm `key`, trường hợp hạn hữu lắm có thể dùng chỉ mục (index) của phần tử trong mảng, tuy nhiên điều này không được khuyến khích vì chỉ mục có thể bị thay đổi.

Chúng ta sửa lại hàm `render()` trong `List` với `key`:

```jsx
{
  products.map(product => (
    <tr key={product.id}>
      <td>{product.id}</td>
      <td>{product.name}</td>
      <td>{product.price} gil</td>
    </tr>
  ))
}
```

Bây giờ React không còn hó hé gì nữa rồi.

### Kết

Chúng ta đã điểm qua cách tạo component trong React với ES6 class, và cách sử dụng `props`. Trong bài tiếp theo, Ehkoo sẽ cùng bạn tìm hiểu về state bên trong component và cách React xử lý các sự kiện người dùng.
