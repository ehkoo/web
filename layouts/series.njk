{% extends "layouts/index.njk" %}

{% block head %}
{% include "layouts/el/opengraph.njk" %}
<link rel="stylesheet" href="/assets/zoom-image/zoom-image.css">
{% endblock %}

{% block bottom %}
<script src="/assets/zoom-image/zoom-image.min.js"></script>
{% endblock %}

{% block content %}
<div class="flex flex-column flex-row-ns flex-wrap pa3">
  <div class="w-100">
    <h1 class="f2 fw7 navy mb4 mt0"><a href="{{ toc.url }}">{{ toc.name }}</a></h1>
  </div>
  <div class="w-30-ns">
    <div class="top-1 sticky bg-white box-shadow-1 pa3 mr3-ns series-toc" id="js-series-toc">
      <h2 class="mv3 fw7 f4 mid-gray ttu">Mục lục</h2>
      <a class="mv3 db mv3 bl bw2 pl2 {% if item.slug === slug %} fw6 b--blue {% else %} b--transparent mid-gray {% endif %}" href="{{ toc.url }}">Giới thiệu</a>
    {% for section in toc.sections %}
      {% set sectionId = loop.index %}
      <div>
        <h2 class="pointer db fw7 red ttu mt4 f4 js-series-toc-heading" data-section-id="{{ sectionId }}">{{ sectionId }}. {{ section.name }}</h2>
        <ul class="ml0 list series-toc-list series-toc-list--hidden" id="js-series-toc-list-{{ sectionId }}">
        {% for item in section.children %}
          <li><a {% if item.slug === slug %} data-active-section="{{ sectionId }}" {% endif %} class="js-series-toc-link db mv3 bl bw2 pl2 {% if item.slug === slug %} fw6 b--blue {% else %} b--transparent mid-gray {% endif %}" href="{{ item.url }}">{{ item.name | safe }}</a></li>
        {% endfor %}
        </ul>
      </div>
    {% endfor %}
    </div>
  </div>

  <div class="w-70-ns">
    <article class="bg-white pv3 ph4 box-shadow-1">
      <h1 class="red fw7 f3 mb4 tracked ttu break-word">{{ title }}</h1>
      <p class="lh-copy mb3 tr silver">
        {{ date }}

         &mdash; {{ wordCount }} từ &mdash; Đọc trong {{ readingTime }}
      </p>

      <div id="js-content" class="content lh-copy dark-gray f4">{{ contents | safe }}</div>

      <hr class="mw3 center db bg-silver">
    </article>

    <section class="flex f4">
      <div class="pa3 fw6 w-50">
        {% if prevArticle %}
          <a class="dark-red" href="{{ prevArticle.url }}">&laquo; {{ prevArticle.name }}</a>
        {% endif %}
      </div>
      <div class="pa3 fw6 w-50 tr">
        {% if nextArticle %}
          <a class="dark-red" href="{{ nextArticle.url }}">{{ nextArticle.name }} &raquo;</a>
        {% endif %}
      </div>
    </section>

    <div class="mt4">{% include "layouts/el/widgets/comments.njk" %}</div>
  </div>
</div>
{% endblock %}
